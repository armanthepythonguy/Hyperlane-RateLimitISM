"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.errorToString = exports.streamToString = exports.trimToLength = exports.sanitizeString = exports.toTitleCase = void 0;
function toTitleCase(str) {
    return str.replace(/\w\S*/g, (txt) => {
        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
    });
}
exports.toTitleCase = toTitleCase;
// Only allows letters and numbers
const alphanumericRgex = /[^a-zA-Z0-9]/gi;
function sanitizeString(str) {
    if (!str || typeof str !== 'string')
        return '';
    return str.replaceAll(alphanumericRgex, '').toLowerCase();
}
exports.sanitizeString = sanitizeString;
function trimToLength(value, maxLength) {
    if (!value)
        return '';
    const trimmed = value.trim();
    return trimmed.length > maxLength
        ? trimmed.substring(0, maxLength) + '...'
        : trimmed;
}
exports.trimToLength = trimToLength;
function streamToString(stream) {
    return new Promise((resolve, reject) => {
        const chunks = [];
        stream
            .setEncoding('utf8')
            .on('data', (chunk) => chunks.push(chunk))
            .on('error', (err) => reject(err))
            .on('end', () => resolve(String.prototype.concat(...chunks)));
    });
}
exports.streamToString = streamToString;
function errorToString(error, maxLength = 300) {
    if (!error)
        return 'Unknown Error';
    if (typeof error === 'string')
        return trimToLength(error, maxLength);
    if (typeof error === 'number')
        return `Error code: ${error}`;
    const details = error.message || error.reason || error;
    if (typeof details === 'string')
        return trimToLength(details, maxLength);
    return trimToLength(JSON.stringify(details), maxLength);
}
exports.errorToString = errorToString;
//# sourceMappingURL=strings.js.map